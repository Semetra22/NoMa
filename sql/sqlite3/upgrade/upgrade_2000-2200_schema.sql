ALTER TABLE [escalation_stati] ADD COLUMN [customvariables] varchar(1023) NULL;
ALTER TABLE [escalation_stati] ADD COLUMN [impact] varchar(4095) NULL;
ALTER TABLE [notifications] ADD COLUMN [customvariables_include] varchar(2047) NULL;
ALTER TABLE [notifications] ADD COLUMN [customvariables_exclude] varchar(2047) NULL;
ALTER TABLE [tmp_commands] ADD COLUMN [customvariables] varchar(1023) NULL;
ALTER TABLE [tmp_commands] ADD COLUMN [impact] varchar(4095) NULL;

CREATE TABLE if not exists [audit_log_contactgroups] ( [entry_id] INTEGER PRIMARY KEY AUTOINCREMENT, [timestamp_of_change] timestamp NULL DEFAULT CURRENT_TIMESTAMP, [changed_by_username] varchar(255) NOT NULL, [db_operation] varchar(15) NOT NULL, [id] INTEGER, [name_short] varchar(255) NOT NULL, [name] varchar(255) NOT NULL, [view_only] tinyint(1) NOT NULL DEFAULT ('0'), [timeframe_id] int(11) NOT NULL DEFAULT ('0'), [timezone_id] int(11) NOT NULL DEFAULT ('372'));
CREATE TABLE if not exists `contactgroups_to_contacts` ( [entry_id] INTEGER PRIMARY KEY AUTOINCREMENT, [timestamp_of_change] timestamp NULL DEFAULT CURRENT_TIMESTAMP, [changed_by_username] varchar(255) NOT NULL, [db_operation] varchar(15) NOT NULL, `contactgroup_id` int(11) NOT NULL,  `contact_id` int(11) NOT NULL);
CREATE TABLE if not exists [audit_log_contacts] ( [entry_id] INTEGER PRIMARY KEY AUTOINCREMENT, [timestamp_of_change] timestamp NULL DEFAULT CURRENT_TIMESTAMP, [changed_by_username] varchar(255) NOT NULL, [db_operation] varchar(15) NOT NULL, [id] INTEGER, [admin] tinyint(1) DEFAULT ('0'), [username] varchar(255) NOT NULL, [full_name] varchar(255) NOT NULL, [email] varchar(255), [phone] varchar(255), [mobile] varchar(255), [section] varchar(255), [growladdress] varchar(255), [password] varchar(255), [timeframe_id] int(11) NOT NULL DEFAULT ('0'), [timezone_id] int(11) NOT NULL DEFAULT ('372'), [restrict_alerts] tinyint(1));
CREATE TABLE if not exists [audit_log_escalations_contacts] ( [entry_id] INTEGER PRIMARY KEY AUTOINCREMENT, [timestamp_of_change] timestamp NULL DEFAULT CURRENT_TIMESTAMP, [changed_by_username] varchar(255) NOT NULL, [db_operation] varchar(15) NOT NULL, [id] INTEGER, [notification_id] int(11) NOT NULL, [on_ok] tinyint(1) NOT NULL, [on_warning] tinyint(1) NOT NULL, [on_critical] tinyint(1) NOT NULL, [on_unknown] tinyint(1) NOT NULL, [on_host_up] tinyint(1) NOT NULL, [on_host_unreachable] tinyint(1) NOT NULL, [on_host_down] tinyint(1) NOT NULL, [on_type_problem] tinyint(1) NOT NULL, [on_type_recovery] tinyint(1) NOT NULL, [on_type_flappingstart] tinyint(1) NOT NULL, [on_type_flappingstop] tinyint(1) NOT NULL, [on_type_flappingdisabled] tinyint(1) NOT NULL, [on_type_downtimestart] tinyint(1) NOT NULL, [on_type_downtimeend] tinyint(1) NOT NULL, [on_type_downtimecancelled] tinyint(1) NOT NULL, [on_type_acknowledgement] tinyint(1) NOT NULL, [on_type_custom] tinyint(1) NOT NULL, [notify_after_tries] varchar(255) DEFAULT ('0'));
CREATE INDEX [idx_audit_log_escalations_contacts_notification_id] ON [audit_log_escalations_contacts] ([notification_id]);
CREATE TABLE if not exists [audit_log_escalations_contacts_to_contactgroups] ( [entry_id] INTEGER PRIMARY KEY AUTOINCREMENT, [timestamp_of_change] timestamp NULL DEFAULT CURRENT_TIMESTAMP, [changed_by_username] varchar(255) NOT NULL, [db_operation] varchar(15) NOT NULL, [escalation_contacts_id] int(11) NOT NULL, [contactgroup_id] int(11) NOT NULL, CONSTRAINT [] PRIMARY KEY ([escalation_contacts_id], [contactgroup_id]));
CREATE TABLE if not exists [audit_log_escalations_contacts_to_contacts] ( [entry_id] INTEGER PRIMARY KEY AUTOINCREMENT, [timestamp_of_change] timestamp NULL DEFAULT CURRENT_TIMESTAMP, [changed_by_username] varchar(255) NOT NULL, [db_operation] varchar(15) NOT NULL, [escalation_contacts_id] int(11) NOT NULL, [contacts_id] int(11) NOT NULL, CONSTRAINT [] PRIMARY KEY ([escalation_contacts_id], [contacts_id]));
CREATE TABLE if not exists [audit_log_escalations_contacts_to_methods] ( [entry_id] INTEGER PRIMARY KEY AUTOINCREMENT, [timestamp_of_change] timestamp NULL DEFAULT CURRENT_TIMESTAMP, [changed_by_username] varchar(255) NOT NULL, [db_operation] varchar(15) NOT NULL, [escalation_contacts_id] int(11) NOT NULL, [method_id] int(11) NOT NULL, CONSTRAINT [] PRIMARY KEY ([escalation_contacts_id], [method_id]));
CREATE TABLE if not exists [audit_log_holidays] ( [entry_id] INTEGER PRIMARY KEY AUTOINCREMENT, [timestamp_of_change] timestamp NULL DEFAULT CURRENT_TIMESTAMP, [changed_by_username] varchar(255) NOT NULL, [db_operation] varchar(15) NOT NULL, [id] INTEGER, [holiday_name] varchar(255), [timeframe_id] int(11), [contact_id] int(11), [holiday_start] datetime NOT NULL, [holiday_end] datetime NOT NULL);
CREATE INDEX [idx_audit_log_holidays_contact_id] ON [audit_log_holidays] ([id], [contact_id]);
CREATE INDEX [idx_audit_log_holidays_timeframe_id] ON [audit_log_holidays] ([id], [timeframe_id]);
CREATE TABLE if not exists [audit_log_notifications] (  [entry_id] INTEGER PRIMARY KEY AUTOINCREMENT, [timestamp_of_change] timestamp NULL DEFAULT CURRENT_TIMESTAMP, [changed_by_username] varchar(255) NOT NULL, [db_operation] varchar(15) NOT NULL, [id] int(11) NOT NULL, [notification_name] varchar(255), [notification_description] varchar(1024), [active] tinyint(1) NOT NULL, [username] varchar(255) NOT NULL, [recipients_include] varchar(255) NULL, [recipients_exclude] varchar(255) NULL, [hosts_include] varchar(255) NULL, [hosts_exclude] varchar(255) NULL, [hostgroups_include] varchar(255) NULL, [hostgroups_exclude] varchar(255) NULL, [services_include] varchar(255) NULL, [services_exclude] varchar(255) NULL, [servicegroups_include] varchar(255) NULL, [servicegroups_exclude] varchar(255) NULL, [customvariables_include] varchar(2047) NULL, [customvariables_exclude] varchar(2047) NULL, [notify_after_tries] varchar(10) DEFAULT ('0'), [let_notifier_handle] tinyint(1) DEFAULT ('0'), [rollover] tinyint(1) DEFAULT ('0'), [reloop_delay] int(11) DEFAULT ('0'), [on_ok] tinyint(1) DEFAULT ('0'), [on_warning] tinyint(1) DEFAULT ('0'), [on_unknown] tinyint(1) DEFAULT ('0'), [on_host_unreachable] tinyint(1) DEFAULT ('0'), [on_critical] tinyint(1) DEFAULT ('0'), [on_host_up] tinyint(1) DEFAULT ('0'), [on_host_down] tinyint(1) DEFAULT ('0'), [on_type_problem] tinyint(1) DEFAULT ('0'), [on_type_recovery] tinyint(1) DEFAULT ('0'), [on_type_flappingstart] tinyint(1) DEFAULT ('0'), [on_type_flappingstop] tinyint(1) DEFAULT ('0'), [on_type_flappingdisabled] tinyint(1) DEFAULT ('0'), [on_type_downtimestart] tinyint(1) DEFAULT ('0'), [on_type_downtimeend] tinyint(1) DEFAULT ('0'), [on_type_downtimecancelled] tinyint(1) DEFAULT ('0'), [on_type_acknowledgement] tinyint(1) DEFAULT ('0'), [on_type_custom] tinyint(1) DEFAULT ('0'), [timezone_id] int(11) NOT NULL DEFAULT ('372'), [timeframe_id] int(11) NOT NULL DEFAULT ('0'));
CREATE INDEX [idx_audit_log_notifications] ON [notification_audit_log] ([entry_id], [notification_rule_id], [timeframe_id]);
CREATE TABLE if not exists [audit_log_notifications_to_contactgroups] ( [entry_id] INTEGER PRIMARY KEY AUTOINCREMENT, [timestamp_of_change] timestamp NULL DEFAULT CURRENT_TIMESTAMP, [changed_by_username] varchar(255) NOT NULL, [db_operation] varchar(15) NOT NULL, [notification_id] int(11) NOT NULL, [contactgroup_id] int(11) NOT NULL, CONSTRAINT [] PRIMARY KEY ([notification_id], [contactgroup_id]));
CREATE TABLE if not exists [audit_log_notifications_to_contacts] ( [entry_id] INTEGER PRIMARY KEY AUTOINCREMENT, [timestamp_of_change] timestamp NULL DEFAULT CURRENT_TIMESTAMP, [changed_by_username] varchar(255) NOT NULL, [db_operation] varchar(15) NOT NULL, [notification_id] int(11) NOT NULL, [contact_id] int(11) NOT NULL, CONSTRAINT [] PRIMARY KEY ([notification_id], [contact_id]));
CREATE TABLE if not exists [audit_log_notifications_to_methods] ( [entry_id] INTEGER PRIMARY KEY AUTOINCREMENT, [timestamp_of_change] timestamp NULL DEFAULT CURRENT_TIMESTAMP, [changed_by_username] varchar(255) NOT NULL, [db_operation] varchar(15) NOT NULL, [notification_id] int(11) NOT NULL, [method_id] int(11) NOT NULL, CONSTRAINT [] PRIMARY KEY ([notification_id], [method_id]));
CREATE TABLE if not exists [audit_log_timeframes] ( [entry_id] INTEGER PRIMARY KEY AUTOINCREMENT, [timestamp_of_change] timestamp NULL DEFAULT CURRENT_TIMESTAMP, [changed_by_username] varchar(255) NOT NULL, [db_operation] varchar(15) NOT NULL, [id] INTEGER, [timeframe_name] varchar(60) NOT NULL, [dt_validFrom] datetime NOT NULL, [dt_validTo] datetime NOT NULL, [day_monday_all] tinyint(1) DEFAULT ('0'), [day_monday_1st] tinyint(1) DEFAULT ('0'), [day_monday_2nd] tinyint(1) DEFAULT ('0'), [day_monday_3rd] tinyint(1) DEFAULT ('0'), [day_monday_4th] tinyint(1) DEFAULT ('0'), [day_monday_5th] tinyint(1) DEFAULT ('0'), [day_monday_last] tinyint(1) DEFAULT ('0'), [day_tuesday_all] tinyint(1) DEFAULT ('0'), [day_tuesday_1st] tinyint(1) DEFAULT ('0'), [day_tuesday_2nd] tinyint(1) DEFAULT ('0'), [day_tuesday_3rd] tinyint(1) DEFAULT ('0'), [day_tuesday_4th] tinyint(1) DEFAULT ('0'), [day_tuesday_5th] tinyint(1) DEFAULT ('0'), [day_tuesday_last] tinyint(1) DEFAULT ('0'), [day_wednesday_all] tinyint(1) DEFAULT ('0'), [day_wednesday_1st] tinyint(1) DEFAULT ('0'), [day_wednesday_2nd] tinyint(1) DEFAULT ('0'), [day_wednesday_3rd] tinyint(1) DEFAULT ('0'), [day_wednesday_4th] tinyint(1) DEFAULT ('0'), [day_wednesday_5th] tinyint(1) DEFAULT ('0'), [day_wednesday_last] tinyint(1) DEFAULT ('0'), [day_thursday_all] tinyint(1) DEFAULT ('0'), [day_thursday_1st] tinyint(1) DEFAULT ('0'), [day_thursday_2nd] tinyint(1) DEFAULT ('0'), [day_thursday_3rd] tinyint(1) DEFAULT ('0'), [day_thursday_4th] tinyint(1) DEFAULT ('0'), [day_thursday_5th] tinyint(1) DEFAULT ('0'), [day_thursday_last] tinyint(1) DEFAULT ('0'), [day_friday_all] tinyint(1) DEFAULT ('0'), [day_friday_1st] tinyint(1) DEFAULT ('0'), [day_friday_2nd] tinyint(1) DEFAULT ('0'), [day_friday_3rd] tinyint(1) DEFAULT ('0'), [day_friday_4th] tinyint(1) DEFAULT ('0'), [day_friday_5th] tinyint(1) DEFAULT ('0'), [day_friday_last] tinyint(1) DEFAULT ('0'), [day_saturday_all] tinyint(1) DEFAULT ('0'), [day_saturday_1st] tinyint(1) DEFAULT ('0'), [day_saturday_2nd] tinyint(1) DEFAULT ('0'), [day_saturday_3rd] tinyint(1) DEFAULT ('0'), [day_saturday_4th] tinyint(1) DEFAULT ('0'), [day_saturday_5th] tinyint(1) DEFAULT ('0'), [day_saturday_last] tinyint(1) DEFAULT ('0'), [day_sunday_all] tinyint(1) DEFAULT ('0'), [day_sunday_1st] tinyint(1) DEFAULT ('0'), [day_sunday_2nd] tinyint(1) DEFAULT ('0'), [day_sunday_3rd] tinyint(1) DEFAULT ('0'), [day_sunday_4th] tinyint(1) DEFAULT ('0'), [day_sunday_5th] tinyint(1) DEFAULT ('0'), [day_sunday_last] tinyint(1) DEFAULT ('0'), [time_monday_start] time DEFAULT ('00:00:00'), [time_monday_stop] time DEFAULT ('00:00:00'), [time_monday_invert] tinyint(1) DEFAULT ('0'), [time_tuesday_start] time DEFAULT ('00:00:00'), [time_tuesday_stop] time DEFAULT ('00:00:00'), [time_tuesday_invert] tinyint(1) DEFAULT ('0'), [time_wednesday_start] time DEFAULT ('00:00:00'), [time_wednesday_stop] time DEFAULT ('00:00:00'), [time_wednesday_invert] tinyint(1) DEFAULT ('0'), [time_thursday_start] time DEFAULT ('00:00:00'), [time_thursday_stop] time DEFAULT ('00:00:00'), [time_thursday_invert] tinyint(1) DEFAULT ('0'), [time_friday_start] time DEFAULT ('00:00:00'), [time_friday_stop] time DEFAULT ('00:00:00'), [time_friday_invert] tinyint(1) DEFAULT ('0'), [time_saturday_start] time DEFAULT ('00:00:00'), [time_saturday_stop] time DEFAULT ('00:00:00'), [time_saturday_invert] tinyint(1) DEFAULT ('0'), [time_sunday_start] time DEFAULT ('00:00:00'), [time_sunday_stop] time DEFAULT ('00:00:00'), [time_sunday_invert] tinyint(1) DEFAULT ('0'));
